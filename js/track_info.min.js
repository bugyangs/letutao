(function(){var d={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},getInfo:function(){var a={};a.resolution=window.screen.width+"x"+window.screen.height;a.referrerinfo=document.referrer;a.url=window.location.href;a.useragent=navigator.userAgent;a.cookie=$.cookie("JSESSIONID");var b=new Date;
a.time=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()+" "+b.getHours()+":"+b.getMinutes();return a},detectOS:function(){var a=navigator.userAgent,b="Win32"==navigator.platform||"Windows"==navigator.platform,c="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(c)return"Mac";if("X11"==navigator.platform&&!b&&!c)return"Unix";if(-1<String(navigator.platform).indexOf("Linux"))return"Linux";if(b){if(-1<a.indexOf("Windows NT 5.0")||
-1<a.indexOf("Windows 2000"))return"Win2000";if(-1<a.indexOf("Windows NT 5.1")||-1<a.indexOf("Windows XP"))return"WinXP";if(-1<a.indexOf("Windows NT 5.2")||-1<a.indexOf("Windows 2003"))return"Win2003";if(-1<a.indexOf("Windows NT 6.0")||-1<a.indexOf("Windows Vista"))return"WinVista";if(-1<a.indexOf("Windows NT 6.1")||-1<a.indexOf("Windows 7"))return"Win7"}return"other"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;
if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,
identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",
versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};d.init();var c=d.getInfo();$.ajax({url:GUANGER.path+"/track",type:"post",dataType:"json",data:{userId:GUANGER.userId,ip:GUANGER.userIp,
url:c.url,referrer:c.referrerinfo,createTime:c.time,cookie:c.cookie,browser:d.browser,userAgent:c.useragent,os:d.detectOS(),resolution:c.resolution}})})();
